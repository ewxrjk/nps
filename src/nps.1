.TH nps 1
.SH NAME
nps \- list processes
.SH SYNOPSIS
.B nps
.RI [ OPTIONS ]
.RI [ MATCHES ]
.SH DESCRIPTION
.B nps
writes a snapshot of information about processes running on the system.
.SH OPTIONS
.IP \fB-a
Select processes which have a controlling terminal.
.IP "\fB-A\fR, \fB-e"
Select all processes.
.IP "\fB-C \fINAME"
Select processes by name.
.IP
Equivalent to \fBcomm=\fINAME\fR (see \fBMATCH EXPRESSIONS\fR below).
.IP \fB-d
Select all processes that are not session leaders.
.IP \fB-f
Set the "full" output format.
.IP \fB-l
Set the "long" output format.
.IP "\fB-g \fILIST"
Select all processes whose sessions are in \fILIST\fR.
.IP "\fB-G \fILIST"
Select all processes whose real group ID is in \fILIST\fR (by name or
number).
.IP "\fB-n \fIANYTHING"
Ignored.
.IP "\fB-o \fIFORMAT\fR, \fB-O \fIFORMAT"
Set a specific format.
If multiple \fB-o\fR or \fB-O\fR options are given then they are cumulative.
See \fBFORMATTING\fR below.
.IP "\fB-p \fILIST"
Select all the processes in \fILIST\fR.
.IP "\fB-t \fILIST"
Select all the processes whose controlling terminals are in \fILIST\fR.
Terminal names may be abbreviated by ommitting the initial \fB/dev\fR.
.IP "\fB-u \fILIST"
Select all the processes whose effective user ID is in \fILIST\fR (by
name or number).
.IP "\fB-U \fILIST"
Select all the processes whose real user ID is in \fILIST\fR (by
name or number).
.IP \fB--help
Display a usage message.
.IP \fB--help-format
Displays help for the \fB-o\fR option.
.IP \fB--version
Display a version string.
.PP
All \fILIST\fR options consists of elements separated by spaces or
commas.
.PP
Process selection is cumulative, i.e. if multiple process selection
options are given then any process which is selected by at least
one of them is selected.
If no selection options are given then only processes that share an
effective UID and terminal with the current process are selected.
.SH "MATCH EXPRESSIONS"
Following the options may appear one or more match expressions.
These are general-purpose process selection options and come in two
forms.
.PP
The first is \fIPROPERTY\fB=\fIVALUE\fR and matches only if the named
property exactly matches the given value.
For instance, \fBcomm=kvm\fR can be used to match \fBkvm\fR processes
only.
.PP
The second is \fIPROPERTY\fB~\fIREGEXP\fR and matches if the named
property matches the extended POSIX regexp.
For instance \fBargs~dbus\fR will match \fBdbus-daemon\fR,
\dBdbus-launch\fR, etc.
.PP
As with other process selection options, the effect of match
expressions is cumulative.
.SH FORMATTING
The \fB-o\fR option specifies a list of process properties to display,
separated by spaces or commas.
The available properties are:
.IP \fBaddr
The current instruction pointer (hex).
.IP \fBargs
Command line.
If these cannot be determined then the value of \fBcomm\fR is used, in
square brackets.
.IP
This corresponds to the \fBargv\fR array passed to \fBmain\fR; for a
script the first element will be the name of the interpreter and the
second element the name of the script.
.IP
Requested widths are mandatory for \fBargs\fR.
.IP \fBargsbrief
Exactly the same as \fBargs\fR but with the directory part of the
command stripped.
.IP \fBcomm
Program filename.
This corresponds to the first argument to \fBexecve\fR(3); for a
script it is the basename of the script, not the name of the
interpreter.
.IP
Requested widths are mandatory for \fBcomm\fR.
.IP \fBetime
Time elapsed since the process started.
.IP \fBflags
Flags word from the kernel (octal).
You will need a copy of the kernel sources to be able to interpret this.
.IP \fBflagsx
Flags word from the kernel (hex).
.IP \fBgid
Effective group ID (decimal).
.IP \fBgroup
Effective group ID as a string.
If the group name will not fit into the requested width, the numeric ID
will be used instead.
.IP \fBio
IO rate, in kilobytes per second.
This is the sum of \fBread\fR and \fBwrite\fR.
.IP \fBioM
IO rate, in megabytes per second.
.IP \fBmajflt
Major fault rate, in kilobytes per second.
Major faults are page faults that require a page to be read from disk.
.IP \fBmajfltM
Major fault rate, in megabytes per second.
.IP \fBmajfltP
Major fault rate, in pages per second.
.IP \fBminflt
Minor fault rate, in kilobytes per second.
Minor faults do not require a page to be read from disk.
.IP \fBminfltM
Minor fault rate, in megabytes per second.
.IP \fBminfltP
Minor fault rate, in pages per second.
.IP \fBnice
Nice value.
Higher values mean lower priority ("nicer").
.IP \fBoom
OOM score.
Higher values mean the kernel is more likely to kill the process when
memory runs out.
.IP \fBpcpu
CPU usage, as a percentage.
(See \fBBUGS\fR below.)
.IP \fBpgid
Process group ID.
.IP \fBpid
Process ID.
.IP \fBppid
Parent process ID.
.IP \fBpri
Priority.
.IP \fBread
Read rate, in kilobytes per second.
.IP \fBreadM
Read rate, in megabytes per second.
.IP \fBrgid
Real group ID (decimal).
.IP \fBrgroup
Real group ID as a string.
If the group name will not fit into the requested width, the numeric ID
will be used instead.
.IP \fBrss
Resident set size in kilobytes.
This the total amount of RAM used by the process.
.IP \fBrssM
Resident set size in megabytes.
.IP \fBruid
Real user ID (decimal).
.IP \fBruser
Real user ID as a string.
If the user name will not fit into the requested width, the numeric ID
will be used instead.
.IP \fBstate
Process state.
The possible states are:
.RS
.IP \fBR
Running.
.IP \fBS
Sleeping.
.IP \fBD
Disk wait.
.IP \fBZ
Exited but not yet reaped (a "zombie" process).
.IP \fBT
Traced or stopped due to a signal.
.IP \fBW
Paging.
.RE
.IP \fBstime
The time that the process started.
.IP \fBtime
The cumulative CPU time used over the process's lifetime (user and kernel).
.IP \fBtty
Controlling terminal.
The leading \fI/dev/tty\fR or \fI/dev\fR is stripped for compactness.
.IP \fBuid
Effective user ID (decimal).
.IP \fBuser
Effective user ID as a string.
If the user name will not fit into the requested width, the numeric ID
will be used instead.
.IP \fBvsz
Virtual memory size, in kilobytes.
This is the total address space used by the process.
Note that it may be misleadingly large as a measure of memory
consumption due to anonymous \fBPROT_NONE\fR mappings.
.IP \fBvszM
Virtual memory size, in megabytes.
.IP \fBwchan
Wait channel.
.IP \fBwrite
Write rate, in kilobytes per second.
.IP \fBwriteM
Write rate, in megabytes per second.
.SS "Column Width"
By default, every column is made wide enough for every value that
appears in it.
.PP
To request a particular width for a column, use the syntax
\fIPROPERTY\fB:\fIWIDTH\fR.
For most properties, requested widths are only advisory; if necessary
columns will be made wider to fit.
However if possible an alternative representation will be used to fit
within the requested width.
For certain properties such as \fBargs\fR requested widths are
mandatory.
.SS "Headings"
To give a property a different heading, use the syntax
\fIPROPERTY\fB=\fIHEADING\fR.
With \fB-o\fR this only works on the last property in a single argument.
Use multiple \fB-o\fR options to work around this.
With \fB-O\fR this can be used on any or all of the properties within
an argument.
If the heading contains spaces or quotes then it must be quoted.
.SS "Time Intervals"
Time intervals (such as \fBetime\fR) are represented as
[[\fIDD\fB-\fR]\fIHH\fB:\fR]\fIMM\fB:\fISS\fR, with \fIDD\fR
representing the number of days, \fIHH\fR the number of hours,
\fIMM\fR the number of minutes and \fISS\fR the number of seconds.
.PP
If a column width is requested then more compact forms may be used:
\fIDD\fB-\fIHH\fR or \fIDD\fBd\fR.
.SS "Timestamps"
Timestamps (such as \fBstime\fR) are represented as
\fIYYYY\fB-\fIMM\fB-\fIDD\fR for times outside than
the current day and \fIHH\fB:\fIMM\fB:\fISS\fR for times during the
current day.
They are always given in the local timezone.
.PP
If a column width is requested then more compact forms may be used:
\fIHH\fB:\fIMM\fR for a time in this day or \fIMM\fB-\fIDD\fR for
a date in this year.
.SS Defaults
If no formatting options at all are specified then the default is
equivalent to:
.PP
.RS
\fB-Opid,tty=TTY,time,comm=CMD
.RE
.PP
The \fB-f\fR option is equivalent to:
.PP
.RS
\fB-Ouser=UID,pid,ppid,pcpu=C,stime,tty=TTY,time,comm=CMD
.RE
.PP
The \fB-l\fR option is equivalent to:
.PP
.RS
\fB-Oflags,state,uid,pid,ppid,pcpu=C,pri,nice,addr,vsz=SZ,
wchan,tty=TTY,time,argsbrief=CMD
.RE
.SH CONFIGURATION
On startup defaults are read from the file \fB$HOME/.npsrc\fR, if it
exists.
Each line has a \fIKEY\fB=\fIVALUE\fR format, with \fBps\fR
recognizing the following keys:
.IP \fBps_format
The default format.
.IP \fBps_f_format
The format to use if \fB-f\fR is specified.
.IP \fBps_l_format
The format to use if \fB-l\fR is specified.
.PP
In this file, unlike in command line arguments, headings may be quoted
(and must be quoted, if they contain a space, comma or quotes).
.SH ENVIRONMENT
.TP
.B COLUMNS
The maximum line length.
If \fBCOLUMNS\fR is not set then window width is used when writing to
a terminal, and no truncation takes place when writing to any other
kind of output.
.SH BUGS
Rate properties such as \fBpcpu\fR is computed over the process's
entire lifetime, which is stretching the definition of "recent".
.PP
The meaning of \fBflags\fR is not very clear.
.SH STANDARDS
Intended to follow SUS v4.
.SH AUTHOR
Richard Kettlewell <rjk@greenend.org.uk>
